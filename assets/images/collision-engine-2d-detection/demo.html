<html>
	<head>
		<title>Headbutt 2D Collisions</title>
		<style>
			html, body {
				width: 100%;
				height: 100%;
				margin: 0;
			}
            canvas {
                display: block;
                width: 100vw;
                height: 100vh;
            }
		</style>
	</head>
	<body>
        <canvas id='canvas'></canvas>
		<script>(function(y){function r(){}function t(){}function m(a){if(a instanceof Array&&null==a.h)this.i=a,this.byteLength=a.length;else{this.i=[];for(var b=0;b<a;){var c=b++;this.i[c]=0}this.byteLength=a}}function g(){}function l(a){this.message=String(a);Error.captureStackTrace&&Error.captureStackTrace(this,l)}function v(a){this.c=a}function u(a,b){this.f=a;this.o=b}function w(){}function z(){}function x(){}function n(){}function A(){}function d(){}function B(){}B.b=!0;B.remove=function(a,b){var c=a.indexOf(b);
if(-1==c)return!1;a.splice(c,1);return!0};d.b=!0;d.ia=function(){d.I=d.H;var a=window.document.getElementById("canvas");a.width=a.clientWidth;a.height=a.clientHeight;d.a=a.getContext("2d",null);window.requestAnimationFrame(d.O);var b=new f(4);b[0]=100;b[1]=100;d.m=new u(b,16);b=new f(4);b[0]=10;b[1]=10;var c=new f(4);c[0]=100;c[1]=25;var e=new f(4);e[0]=50;e[1]=75;d.j=new v([b,c,e]);b=new f(4);b[0]=100;b[1]=150;d.g=new u(b,32);d.P=new z;a.addEventListener("mousemove",d.ja);a.addEventListener("touchstart",
d.V);a.addEventListener("touchmove",d.V)};d.ja=function(a){d.U(a.clientX,a.clientY)};d.V=function(a){d.U(a.touches[0].clientX,a.touches[0].clientY);a.stopPropagation()};d.U=function(a,b){var c=d.a.canvas.getBoundingClientRect();d.m.f[0]=a-c.left;d.m.f[1]=b-c.top};d.O=function(a){var b=(a-d.T)/1E3;d.T=a;d.g.f[0]+=d.I*b;d.g.f[0]<d.g.o?(d.g.f[0]=d.g.o,d.I=d.H):d.g.f[0]>d.a.canvas.clientWidth-d.g.o&&(d.g.f[0]=d.a.canvas.clientWidth-d.g.o,d.I=-d.H);d.S=d.P.test(d.j,d.m);d.R=d.P.test(d.g,d.m);d.a.canvas.width=
d.a.canvas.clientWidth;d.a.canvas.height=d.a.canvas.clientHeight;d.a.clearRect(0,0,d.a.canvas.clientWidth,d.a.canvas.clientHeight);d.a.beginPath();d.a.moveTo(d.j.c[0][0],d.j.c[0][1]);a=1;for(b=d.j.c.length;a<b;){var c=a++;d.a.lineTo(d.j.c[c][0],d.j.c[c][1])}d.a.lineTo(d.j.c[0][0],d.j.c[0][1]);d.a.strokeStyle="#324D5C";d.a.lineWidth=4;d.a.lineJoin="round";d.a.lineCap="round";d.a.stroke();d.a.beginPath();d.a.arc(d.g.f[0],d.g.f[1],d.g.o,0,2*Math.PI);d.a.stroke();d.a.beginPath();d.a.arc(d.m.f[0],d.m.f[1],
d.m.o,0,2*Math.PI);d.a.fillStyle=d.S||d.R?"#46B39D":"#DE5B49";d.a.fill();window.requestAnimationFrame(d.O)};Math.b=!0;A.b=!0;A.Y=function(a){return g.s(a,"")};n.b=!0;n.na=function(a,b,c){return a+c*(b-a)};n.translate=function(a,b){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;b[12]=a[0];b[13]=a[1];b[14]=a[2];return b};n.rotate=function(a,b){var c=a[0]+a[0],e=a[1]+a[1],k=a[2]+a[2],d=a[0]*c,h=a[0]*e,g=a[0]*k,f=a[1]*e,E=a[1]*k,n=
a[2]*k,c=a[3]*c,e=a[3]*e,k=a[3]*k;b[0]=1-(f+n);b[4]=h-k;b[8]=g+e;b[12]=0;b[1]=h+k;b[5]=1-(d+n);b[9]=E-c;b[13]=0;b[2]=g-e;b[6]=E+c;b[10]=1-(d+f);b[14]=0;b[3]=0;b[7]=0;b[11]=0;b[15]=1;return b};n.scale=function(a,b){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;b[0]=a[0];b[5]=a[1];b[10]=a[2];return b};n.transform=function(a,b,c,e){var k=b[0]+b[0],d=b[1]+b[1],h=b[2]+b[2],g=b[0]*k,f=b[0]*d,n=b[0]*h,l=b[1]*d,p=b[1]*h,m=b[2]*h,k=b[3]*
k,d=b[3]*d;b=b[3]*h;e[0]=(1-(l+m))*c[0];e[1]=(f+b)*c[0];e[2]=(n-d)*c[0];e[3]=0;e[4]=(f-b)*c[1];e[5]=(1-(g+m))*c[1];e[6]=(p+k)*c[1];e[7]=0;e[8]=(n+d)*c[2];e[9]=(p-k)*c[2];e[10]=(1-(g+l))*c[2];e[11]=0;e[12]=a[0];e[13]=a[1];e[14]=a[2];e[15]=1;return e};n.oa=function(a,b,c,e){var k,d,h,g,f,l,m,p;if(Math.abs(a[0]-b[0])<n.EPSILON&&Math.abs(a[1]-b[1])<n.EPSILON&&Math.abs(a[2]-b[2])<n.EPSILON)return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=
0,e[15]=1,e;f=a[0]-b[0];l=a[1]-b[1];m=a[2]-b[2];p=1/Math.sqrt(f*f+l*l+m*m);f*=p;l*=p;m*=p;b=c[1]*m-c[2]*l;k=c[2]*f-c[0]*m;c=c[0]*l-c[1]*f;p=Math.sqrt(b*b+k*k+c*c);p<=n.EPSILON?c=k=b=0:(p=1/p,b*=p,k*=p,c*=p);d=l*c-m*k;h=m*b-f*c;g=f*k-l*b;p=Math.sqrt(d*d+h*h+g*g);p<=n.EPSILON?g=h=d=0:(p=1/p,d*=p,h*=p,g*=p);e[0]=b;e[1]=d;e[2]=f;e[3]=0;e[4]=k;e[5]=h;e[6]=l;e[7]=0;e[8]=c;e[9]=g;e[10]=m;e[11]=0;e[12]=-(b*a[0]+k*a[1]+c*a[2]);e[13]=-(d*a[0]+h*a[1]+g*a[2]);e[14]=-(f*a[0]+l*a[1]+m*a[2]);e[15]=1;return e};n.perspective=
function(a,b,c,e,k){a=1/Math.tan(a/2);var d=1/(c-e);k[0]=a/b;k[1]=0;k[2]=0;k[3]=0;k[4]=0;k[5]=a;k[6]=0;k[7]=0;k[8]=0;k[9]=0;k[10]=(e+c)*d;k[11]=-1;k[12]=0;k[13]=0;k[14]=2*e*c*d;k[15]=0;return k};n.pa=function(a,b,c,e,k,d,h){null==d&&(d=1);null==k&&(k=-1);var f=1/(b-a),g=1/(e-c),D=1/(d-k);h[0]=2*f;h[4]=0;h[8]=0;h[12]=-1*(a+b)*f;h[1]=0;h[5]=2*g;h[9]=0;h[13]=-1*(e+c)*g;h[2]=0;h[6]=0;h[10]=-2*D;h[14]=-1*(d+k)*D;h[3]=0;h[7]=0;h[11]=0;h[15]=1;return h};n.ma=function(a,b,c,e,d,f,h){null==f&&(f=1);null==
d&&(d=-1);var k=1/(e-c),g=1/(d-f);h[0]=1/(b-a)*d*2;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=2*d*k;h[6]=0;h[7]=0;h[8]=(b+a)*k;h[9]=(e+c)*k;h[10]=(f+d)*g;h[11]=-1;h[12]=0;h[13]=0;h[14]=f*d*2*g;h[15]=0;return h};x.b=!0;x.ha=function(a){var b=a>>>23&255,c=a&8388607;return 0==c&&0==b?0:(1-(a>>>31<<1))*(1+Math.pow(2,-23)*c)*Math.pow(2,b-127)};x.fa=function(a){if(0==a)return 0;var b=0>a?-a:a,c=Math.floor(Math.log(b)/.6931471805599453);-127>c?c=-127:128<c&&(c=128);b=Math.round(8388608*(b/Math.pow(2,c)-1));8388608==
b&&128>c&&(b=0,++c);return(0>a?-2147483648:0)|c+127<<23|b};var q={B:!0,la:["NoIntersection","FoundIntersection","StillEvolving"],L:["NoIntersection",0]};q.L.h=q;q.A=["FoundIntersection",1];q.A.h=q;q.v=["StillEvolving",2];q.v.h=q;z.b=!0;z.prototype={da:function(a){var b=new f(4);b[0]=0;b[1]=0;b[0]=-1*a[0];b[1]=-1*a[1];a=this.W.J(a);var b=this.X.J(b),c=new f(4);c[0]=0;c[1]=0;c[0]=a[0]-b[0];c[1]=a[1]-b[1];return c},ca:function(a){var b=this.da(a);this.c.push(b);return 0<=a[0]*b[0]+a[1]*b[1]},K:function(a,
b,c){var e=new f(4);e[0]=a[0];e[1]=a[1];e[2]=0;a=new f(4);a[0]=b[0];a[1]=b[1];a[2]=0;b=new f(4);b[0]=c[0];b[1]=c[1];b[2]=0;c=new f(4);c[0]=0;c[1]=0;c[2]=0;c=new f(4);c[0]=e[1]*a[2]-e[2]*a[1];c[1]=e[2]*a[0]-e[0]*a[2];c[2]=e[0]*a[1]-e[1]*a[0];e=new f(4);e[0]=0;e[1]=0;e[2]=0;e=new f(4);e[0]=c[1]*b[2]-c[2]*b[1];e[1]=c[2]*b[0]-c[0]*b[2];e[2]=c[0]*b[1]-c[1]*b[0];b=new f(4);b[0]=e[0];b[1]=e[1];return b},ea:function(){switch(this.c.length){case 0:var a=this.X.G(),b=this.W.G(),c=new f(4);c[0]=0;c[1]=0;c[0]=
a[0]-b[0];c[1]=a[1]-b[1];this.direction=c;break;case 1:a=this.direction;b=new f(4);b[0]=0;b[1]=0;b[0]=-1*a[0];b[1]=-1*a[1];this.direction=b;break;case 2:c=this.c[1];a=this.c[0];b=new f(4);b[0]=0;b[1]=0;b[0]=c[0]-a[0];b[1]=c[1]-a[1];c=new f(4);c[0]=0;c[1]=0;c[0]=-1*a[0];c[1]=-1*a[1];this.direction=this.K(b,c,b);break;case 3:var e=this.c[2],a=this.c[1],b=this.c[0],c=new f(4);c[0]=0;c[1]=0;c[0]=-1*e[0];c[1]=-1*e[1];var d=new f(4);d[0]=0;d[1]=0;d[0]=a[0]-e[0];d[1]=a[1]-e[1];var g=new f(4);g[0]=0;g[1]=
0;g[0]=b[0]-e[0];g[1]=b[1]-e[1];e=this.K(g,d,d);d=this.K(d,g,g);if(0<e[0]*c[0]+e[1]*c[1])B.remove(this.c,b),this.direction=e;else if(0<d[0]*c[0]+d[1]*c[1])B.remove(this.c,a),this.direction=d;else return q.A;break;default:throw new l("Can't have simplex with "+this.c.length+" verts!");}return this.ca(this.direction)?q.v:q.L},test:function(a,b){this.c=[];this.W=a;this.X=b;for(var c=q.v;c==q.v;)c=this.ea();return c==q.A},l:z};w.b=!0;w.prototype={l:w};u.b=!0;u.M=[w];u.prototype={G:function(){return this.f},
J:function(a){var b=this.f,c=new f(4);c[0]=0;c[1]=0;c[0]=b[0];c[1]=b[1];b=new f(4);b[0]=0;b[1]=0;var e=Math.sqrt(a[0]*a[0]+a[1]*a[1]),d=0;e>=n.EPSILON&&(d=1/e);b[0]=a[0]*d;b[1]=a[1]*d;a=this.o;b[0]*=a;b[1]*=a;c[0]+=b[0];c[1]+=b[1];return c},l:u};v.b=!0;v.M=[w];v.prototype={G:function(){var a=new f(4);a[0]=0;for(var b=a[1]=0,c=0,e=this.c;c<e.length;){var d=e[c];++c;a[0]+=d[0];a[1]+=d[1];b+=1}b=1/b;a[0]*=b;a[1]*=b;return a},J:function(a){for(var b=-Infinity,c=null,e=0,d=this.c;e<d.length;){var g=d[e];
++e;var h=g[0]*a[0]+g[1]*a[1];h>b&&(b=h,c=g)}return c},l:v};l.b=!0;l.qa=function(a){return a instanceof Error?a:new l(a)};l.aa=Error;l.prototype=function(a,b){function c(){}c.prototype=a;var e=new c,d;for(d in b)e[d]=b[d];b.toString!==Object.prototype.toString&&(e.toString=b.toString);return e}(Error.prototype,{l:l});g.b=!0;g.ga=function(a){if(a instanceof Array&&null==a.h)return Array;var b=a.l;if(null!=b)return b;a=g.N(a);return null!=a?g.$(a):null};g.s=function(a,b){if(null==a)return"null";if(5<=
b.length)return"<...>";var c=typeof a;"function"==c&&(a.b||a.B)&&(c="object");switch(c){case "function":return"<function>";case "object":if(a instanceof Array){if(a.h){if(2==a.length)return a[0];c=a[0]+"(";b+="\t";for(var e=2,d=a.length;e<d;)var f=e++,c=2!=f?c+(","+g.s(a[f],b)):c+g.s(a[f],b);return c+")"}c=a.length;e="[";b+="\t";for(d=0;d<c;)f=d++,e+=(0<f?",":"")+g.s(a[f],b);return e+"]"}try{e=a.toString}catch(h){return"???"}if(null!=e&&e!=Object.toString&&"function"==typeof e&&(c=a.toString(),"[object Object]"!=
c))return c;c=null;e="{\n";b+="\t";d=null!=a.hasOwnProperty;for(c in a)d&&!a.hasOwnProperty(c)||"prototype"==c||"__class__"==c||"__super__"==c||"__interfaces__"==c||"__properties__"==c||(2!=e.length&&(e+=", \n"),e+=b+c+" : "+g.s(a[c],b));b=b.substring(1);return e+("\n"+b+"}");case "string":return a;default:return String(a)}};g.C=function(a,b){if(null==a)return!1;if(a==b)return!0;var c=a.M;if(null!=c)for(var e=0,d=c.length;e<d;){var f=e++,f=c[f];if(f==b||g.C(f,b))return!0}return g.C(a.aa,b)};g.w=function(a,
b){if(null==b)return!1;switch(b){case Array:return a instanceof Array?null==a.h:!1;case F:return"boolean"==typeof a;case I:return!0;case G:return"number"==typeof a;case J:return"number"==typeof a?(a|0)===a:!1;case String:return"string"==typeof a;default:if(null!=a)if("function"==typeof b){if(a instanceof b||g.C(g.ga(a),b))return!0}else{if("object"==typeof b&&g.Z(b)&&a instanceof b)return!0}else return!1;return b==K&&null!=a.b||b==L&&null!=a.B?!0:a.h==b}};g.N=function(a){a=g.ba.call(a).slice(8,-1);
return"Object"==a||"Function"==a||"Math"==a||"JSON"==a?null:a};g.Z=function(a){return null!=g.N(a)};g.$=function(a){return y[a]};m.b=!0;m.ka=function(a,b){var c=new H(this,a,null==b?null:b-a),e=new C(c.byteLength);(new H(e)).set(c);return e};m.prototype={slice:function(a,b){return new m(this.i.slice(a,b))},l:m};t.b=!0;t.u=function(a,b,c){var e;if("number"==typeof a){e=[];for(b=0;b<a;){var d=b++;e[d]=0}e.byteLength=e.length<<2;e.byteOffset=0;a=[];b=0;for(d=e.length<<2;b<d;)b++,a.push(0);e.buffer=new m(a)}else if(g.w(a,
m)){null==b&&(b=0);null==c&&(c=a.byteLength-b>>2);e=[];for(d=0;d<c;){d++;var f=a.i[b++]|a.i[b++]<<8|a.i[b++]<<16|a.i[b++]<<24;e.push(x.ha(f))}e.byteLength=e.length<<2;e.byteOffset=b;e.buffer=a}else if(a instanceof Array&&null==a.h){e=a.slice();a=[];for(b=0;b<e.length;)d=e[b],++b,d=x.fa(d),a.push(d&255),a.push(d>>8&255),a.push(d>>16&255),a.push(d>>>24);e.byteLength=e.length<<2;e.byteOffset=0;e.buffer=new m(a)}else throw new l("TODO "+A.Y(a));e.subarray=t.F;e.set=t.D;return e};t.D=function(a,b){if(g.w(a.buffer,
m)){if(a.byteLength+b>this.byteLength)throw new l("set() outside of range");for(var c=0,d=a.byteLength;c<d;){var f=c++;this[f+b]=a[f]}}else if(a instanceof Array&&null==a.h){if(a.length+b>this.byteLength)throw new l("set() outside of range");c=0;for(d=a.length;c<d;)f=c++,this[f+b]=a[f]}else throw new l("TODO");};t.F=function(a,b){var c=t.u(this.slice(a,b));c.byteOffset=4*a;return c};r.b=!0;r.u=function(a,b,c){if("number"==typeof a){c=[];for(b=0;b<a;){var d=b++;c[d]=0}c.byteLength=c.length;c.byteOffset=
0;c.buffer=new m(c)}else if(g.w(a,m))null==b&&(b=0),null==c&&(c=a.byteLength-b),c=0==b?a.i:a.i.slice(b,b+c),c.byteLength=c.length,c.byteOffset=b,c.buffer=a;else if(a instanceof Array&&null==a.h)c=a.slice(),c.byteLength=c.length,c.byteOffset=0,c.buffer=new m(c);else throw new l("TODO "+A.Y(a));c.subarray=r.F;c.set=r.D;return c};r.D=function(a,b){if(g.w(a.buffer,m)){if(a.byteLength+b>this.byteLength)throw new l("set() outside of range");for(var c=0,d=a.byteLength;c<d;){var f=c++;this[f+b]=a[f]}}else if(a instanceof
Array&&null==a.h){if(a.length+b>this.byteLength)throw new l("set() outside of range");c=0;for(d=a.length;c<d;)f=c++,this[f+b]=a[f]}else throw new l("TODO");};r.F=function(a,b){var c=r.u(this.slice(a,b));c.byteOffset=a;return c};String.prototype.l=String;String.b=!0;Array.b=!0;var J={b:["Int"]},I={b:["Dynamic"]},G=Number;G.b=["Float"];var F=Boolean;F.B=["Bool"];var K={b:["Class"]},L={},C=y.ArrayBuffer||m;null==C.prototype.slice&&(C.prototype.slice=m.ka);var f=y.Float32Array||t.u,H=y.Uint8Array||r.u;
d.T=0;d.H=30;d.S=!1;d.R=!1;n.EPSILON=1E-7;g.ba={}.toString;t.BYTES_PER_ELEMENT=4;r.BYTES_PER_ELEMENT=1;d.ia()})("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);</script>
	</body>
</html>